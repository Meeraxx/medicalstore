"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4728],{44728:function(n,r,e){e.d(r,{uc:function(){return t},YL:function(){return f},tp:function(){return s},a$:function(){return p},hZ:function(){return l},qV:function(){return d}});var t,u=e(11163),o=e(84069),a=e(44266),c=e(7972);function i(n,r,e){return r in n?Object.defineProperty(n,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[r]=e,n}!function(n){n.PHONEPE_SWITCH="PHONEPE_SWITCH",n.PAYTM_MINIAPP="PAYTM_MINIAPP"}(t||(t={}));var f=function(n,r,e){return r({variables:n,fetchPolicy:"no-cache"}).then((function(r){var e=r.data.createOrderAtPaymentMode,o=e.redirectUrl,c=e.transactionToken;switch(s()){case t.PHONEPE_SWITCH:return void(o&&u.default.push(o).then((function(){return null===window||void 0===window?void 0:window.scrollTo(0,0)})));case t.PAYTM_MINIAPP:var i;if(c)(0,a.Mn)({amount:n.orderInput.prepaid_amount,orderId:n.orderInput.payment_order_id,txnToken:c,returnUrl:null===n||void 0===n||null===(i=n.orderInput)||void 0===i?void 0:i.return_url});return}if(!o&&!c)throw"Bad Response Error at createOrderPGMutation"})).catch((function(n){e(!1),console.error("Mini App Payment ORDER Could not created",n)}))},s=function(){var n=[{platform:t.PHONEPE_SWITCH,active:(0,c.lw)()},{platform:t.PAYTM_MINIAPP,active:(0,a.fO)()}].find((function(n){return n.active}));if(n)return n.platform},p=function(n,r){return r===t.PHONEPE_SWITCH?(0,c.xx)(n):r===t.PAYTM_MINIAPP?(0,a.iS)(n):!!n},l=function(n){return[t.PHONEPE_SWITCH,t.PAYTM_MINIAPP].includes(n)},d=function(){var n,r=s();return(i(n={},t.PHONEPE_SWITCH,o.sI.PHONEPE_MINIAPP),i(n,t.PAYTM_MINIAPP,o.sI.PAYTM_MINIAPP),n)[r]}},44266:function(n,r,e){e.d(r,{rZ:function(){return v},fO:function(){return w},Go:function(){return m},hI:function(){return I},Mn:function(){return x},iS:function(){return k},UZ:function(){return A}});var t=e(34051),u=e.n(t),o=e(15144),a=e(30249),c=e(54219),i=e(88385);function f(n,r,e,t,u,o,a){try{var c=n[o](a),i=c.value}catch(f){return void e(f)}c.done?r(i):Promise.resolve(i).then(t,u)}function s(n){return function(){var r=this,e=arguments;return new Promise((function(t,u){var o=n.apply(r,e);function a(n){f(o,t,u,a,c,"next",n)}function c(n){f(o,t,u,a,c,"throw",n)}a(void 0)}))}}function p(n,r,e){return r in n?Object.defineProperty(n,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[r]=e,n}function l(n){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{},t=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(e).filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})))),t.forEach((function(r){p(n,r,e[r])}))}return n}var d=/AppContainer/i,v=function(n){return[-1,-2].includes(n)},w=function(){try{return(0,c.G)((0,a.i)()).isMiniAppUser(d)}catch(n){console.error("Paytm Detection Failed",n)}return!1},P=function(){var n=s(u().mark((function n(r){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!window.JSBridge){n.next=7;break}if(n.t0=r,!n.t0){n.next=5;break}return n.next=5,r();case 5:n.next=8;break;case 7:document.addEventListener("JSBridgeReady",r,!1);case 8:case"end":return n.stop()}}),n)})));return function(r){return n.apply(this,arguments)}}(),h=function(){var n=s(u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,r){window.JSBridge.call("paytmFetchAuthCode",{clientId:"merchant-apollo-pharmacy-prod"},(function(e){e?n(e):r()}))})));case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),m=function(){var n=s(u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,r){window.JSBridge.call("popWindow")})));case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),I=function(){var n=s(u().mark((function n(){var r;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r={},n.prev=1,!(0,o.j)()){n.next=5;break}return n.next=5,P(s(u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h();case 2:r=n.sent;case 3:case"end":return n.stop()}}),n)}))));case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(1),console.error("Paytm Grant Token Error",n.t0);case 10:return n.abrupt("return",r);case 11:case"end":return n.stop()}}),n,null,[[1,7]])})));return function(){return n.apply(this,arguments)}}(),b=function(){var n=s(u().mark((function n(r){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,e){window.JSBridge.call("paytmPayment",l({},r,{mid:"MiniAp81587435942579"}),(function(r){r?n(r):e()}))})));case 1:case"end":return n.stop()}}),n)})));return function(r){return n.apply(this,arguments)}}(),x=function(){var n=s(u().mark((function n(r){var e,t,a,c,i;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=r.amount,t=r.orderId,a=r.txnToken,c=r.returnUrl,n.prev=1,!(0,o.j)()){n.next=6;break}return i={amount:e.toFixed(2),orderId:t,txnToken:a},n.next=6,P(s(u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,b(i);case 2:c&&(window.location.href=c);case 3:case"end":return n.stop()}}),n)}))));case 6:n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),console.error("Paytm Grant Token Error",n.t0);case 11:return n.abrupt("return","InvalidToken");case 12:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(r){return n.apply(this,arguments)}}(),k=function(n){if(!n)return!1;if(w()){try{if(i._9.test(n)){var r=new URL(n);return[new URL(i.Wd),new URL(i.mi)].map((function(n){return n.hostname.replace("www.","")})).includes(r.hostname.replace("www.",""))}return!0}catch(e){console.error("INVALID NAVIGATION URL",e)}return!1}return!1},y=function(){var n=s(u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,r){window.JSBridge.call("paytmGetLocation",{},(function(e){var t;(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.lat)?n(e):r(e)}))})));case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),A=function(){var n=s(u().mark((function n(r,e){var t;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=1,!(0,o.j)()){n.next=10;break}return n.next=5,P(s(u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y();case 2:t=n.sent;case 3:case"end":return n.stop()}}),n)}))));case 5:if(!t){n.next=10;break}if(!(null===t||void 0===t?void 0:t.error)){n.next=9;break}return e(null===t||void 0===t?void 0:t.message),n.abrupt("return");case 9:r({latitude:t.data.lat,longitude:t.data.long});case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(1),console.error("PhonePe Seek Location Error",n.t0);case 15:case"end":return n.stop()}}),n,null,[[1,12]])})));return function(r,e){return n.apply(this,arguments)}}()}}]);